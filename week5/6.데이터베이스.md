## **Chapter 6\. 데이터베이스 서비스**

### **섹션 1.데이터베이스란**

### **1\. 데이터베이스(DB)란?**

* **정의:** 검색과 등록이 용이하게 정리된 데이터 모음.  
* **DBMS:** 데이터를 업데이트, 참조, 삭제하는 관리 시스템. 데이터베이스는 이 DBMS의 요청을 받아 데이터를 처리. 
* **종류:**  
  * **RDS (관계형 데이터베이스):** 데이터를 하나의 표인 '테이블' 단위로 괸리. 여러 테이블이 관계성을 가지고 관리됨. 그리고 관련된 테이블을 조합해 사용. SQL이라는 언어를 사용하여 데이터에 대해 추가, 검색, 업데이트 및 삭제하는 조작을 명령.  
  * **NoSQL:** 키-값(Key-Value)이라는 두가지 요소를 조합해 관리.

**RDS는** 데이터 구조가 명확하고, 결제나 금융처럼 정확도가 생명인 서비스에 적합.               **NoSQL은** 서비스 규모가 엄청나게 크고 데이터 구조가 자주 바뀌는 서비스(SNS, 게임 로그 등)에 적합.

정확성이냐, 유연한 확장이냐의 기준으로 선택.


---


* **ACID 특성:** 관계형 데이터베이스의 특징 중 하나. 데이터베이스에서 수행하는 일련의 처리가 트랜잭션이라 하는데, 이 트랜젝션 단위가 ACID 특성을 가지는 것. 트랜젝션의 신뢰성을 보장하는 4요소의 앞글자를 따왔다.  
  **A**(원자성), **C**(일관성), **I**(독립성), **D**(지속성) → 데이터 불일치 방지.

ACID 특성이 실제로 깨지면 어떤 일이 벌어지나?

 \* **원자성(Atomicity: 트랜젝션이 모두 실행되거나 실행되지 않아야 한다는 특성)이 없다면:** 계좌 이체 중 내 돈은 빠져나갔는데 상대방 계좌엔 안 들어가는 상황 발생.

**\* **일관성(Consistency : 정해진 데이터베이스 규칙을 만족해야 한다는 특성)이 없다면:** 나이가 마이너스 값이 되거나 반드시 입력하게끔 설정한 란에 공란이 되는 등 데이터 규칙이 무너짐.

**\* **독립성(Isolation : 트랜젝션을 단독으로 실행할 때나 동시에 여러 개 실행할 때 결과가 같아야 한다는 특성)이 없다면:** 두 사람이 동시에 마지막 남은 티켓 1장을 샀는데 둘 다 결제 성공이 뜨는 상황.
**\* **지속성(Durability : 하드웨어 장애가 있어도 완료된 트랜잭션의 결과는 손실되지 않아야 한다는 특성.)

NoSQL은 ACID를 안 지키나?

\* NoSQL은 성능을 위해 ACID를 일부 포기하는 대신 **BASE**라는 특성을 가짐. (가용성과 속도를 위해 데이터가 잠시 불일치해도 결국엔 맞춰진다는 개념)

최근 DynamoDB 같은 서비스는 NoSQL임에도 ACID 트랜잭션 기능을 추가로 제공함.

SQL과 NoSQL 언어는 얼마나 다른가?

 \* SQL은 표준 언어가 있어 엔진이 바뀌어도 비슷하지만, NoSQL은 서비스(DynamoDB, MongoDB 등)마다 조작하는 API나 방식이 완전히 다름.

데이터베이스 관리 시스템(DBMS)이 왜 '관리'까지 해주는 건가?

 \* 단순 저장만 하는 게 아니라, 백업, 복구, 보안, 동시 접속 처리 등 아주 복잡한 일을 대신 해줌.


---


### **섹션 2\. AWS에서 관계형 데이터베이스 사용**

### **2\. Amazon RDS (Relational Database Service)**

* **특징:** OS/DB 엔진 설치는 AWS가 수행, 관리 부담 감소와 몇 분만에 데이터베이스 생성 및 이용 가능. 종량과금제(기동되는 시간만큼 과금).  
  * EC2나 온프레미스로 데이터베이스를 구축하면 사용자가 OS설정이나 데이터베이스 엔진을 설치하고 설정해야 하므로 시간이 걸린다. 하지만 RDS를 사용하면 데이터베이스 엔진(데이터베이스에 대한 데이터 등록, 갱신, 삭제 처리를 관리하는 소프트웨어)이 설정된 상태로 만들어져서 즉시 사용가능하다.  
  * RDS에서 데이터베이스를 생성하기 위해서는 AWS관리 콘솔을 이용하거나 API를 이용한다. 관리 콘솔을 이용하면 엔진, 인스턴스 크기를 선택해 데이터베이스를 생성한다  
* **지원 엔진:** MySQL, PostgreSQL, MariaDB, Oracle, SQL Server, **Amazon Aurora**.  
* **성능 결정 요소:**  
  * **인스턴스 유형 :** db.m6g.large 등 (CPU, 메모리 성능).  
* **db:** 데이터베이스용 인스턴스임을 의미.  
* **m:** 범용(General Purpose) 모델. (메모리 최적화는 **r**, CPU 최적화는 **c**)  
* **6:** 6세대 모델 (숫자가 높을수록 최신/고효율).  
* **g:** Graviton 프로세서(AWS 자체 제작 가성비 칩) 사용.  
* **large:** 티셔츠 사이즈처럼 크기(성능)를 나타냄.

  * **스토리지 유형 :** 범용 SSD, 프로비저닝 IOPS(고성능), 마그네틱(저가형).

| 유형 | 비유 | 특징 |
| :---- | :---- | :---- |
| **범용 SSD (gp3/gp2)** | **표준 승용차** | 평소에 무난하게 잘 달리고, 필요할 때 적당히 속도를 낸다. 가격과 성능의 밸런스가 좋다. 개발 환경, 테스트 환경, 중소규모의 일반적인 웹 서비스 등 대부분의 상황에서 추천.  |
| **프로비저닝 IOPS SSD (io1)** | **스포츠카 (전용 차선)** | 내가 지정한 엄청난 속도를 언제나 일정하게 유지해 준다. 성능을 '미리 예약(Provisioned)'하는 고성능 스토리지. **IOPS란?** `Input/Output Operations Per Second`의 약자로, 1초당 데이터를 읽고 쓰는 횟수를 의미. 이 숫자가 높을수록 DB가 빠릿빠릿하게 반응한다. **언제 쓸까?** 대규모 쇼핑몰 결제 시스템, 실시간 주식 거래소처럼 아주 찰나의 지연도 허용되지 않는 **핵심 DB**에 사용한다.  |
| **마그네틱 (Magnetic)** | **화물 트럭** | 느리지만 가격이 아주 저렴하다. 자주 안 꺼내 보는 짐 보관용. 예전 방식의 하드디스크(HDD) 기술. **특징:** SSD보다 훨씬 느리다. 하지만 가격이 매우 저렴하다. **언제 쓸까?** 거의 사용하지 않지만, 로그 기록처럼 저장만 해두고 **가끔씩만 확인하는 데이터**를 보관할 때 비용 절감 차원에서 쓴다. (현재는 성능 차이 때문에 AWS에서도 권장하지 않는 추세.)  |

* **가용성 및 확장:**

 

| 프라이머리 인스턴스 | 예비 복제본 |
| :---- | :---- |

고가용성이란 시스템이 중단되지 않고 작동할 수 있는 능력인데,   
RDS에서는 이를 예비 복제본으로 구현. 이 구성을 다중 AZ배포.

프라이머리 인스턴스나 AZ에 장애가 발생하면 예비 복제본으로 전환하여 데이터베이스를 계속 이용. 이 전환을 장애 조치라고 함. 

RDS에 접속할 때 엔드포인트라는 DNS 형식의 접속 정보를 사용.   
장애 발생시 이 엔드포인트의 목적지가 자동으로 예비 복제본으로 전환.

| 프라이머리 인스턴스 | 읽기 전용 복제본 |
| :---- | :---- |

읽기 전용 레프리카는 프라이머리 인스턴스에서 복제된 인스턴스   
읽기 요청이 늘어나면 인스턴스의 수를 늘리는 스케일아웃 방식으로 성능을 향상할 수 있다. 

* **RDS 보안 설정과 백업**

\<RDS 접근 제어\>  
RDS는 VPC 내에 생성. 두개의 서브넷 필요. 각 서브넷은 리전 내에 서로 다른 AZ에 지정해야 한다. 접근제어는 EC2와 마찬가지로 보안 그룹과 네트워크 ACL에서 설정.  
데이터베이스에 접속하는것은 보통 vpc내에 응용 프로그램일 경우가 많기 때문에 해당 응용 프로그램에서만 데이터베이스에 접속할 수 있게 보안 그룹이나 네트워크 ACL로 적절하게 설정해야 함. 

\<데이터베이스 엔진 업데이트\>  
데이터베이스 엔진이나 데이터베이스 엔진이 실행되는 OS에 취약점이 발생할 수 있으므로 정기적으로 버전 ‘업그레이드’해야함.  
업그레이드는 aws측에서 실시하지만 사용자가 설정한 시간대에 실시 가능.
다중 AZ배포를 사용하는 경우 예비 복사본 -> 프라이머리 인스턴스 순서로 유지 보수 실행.

\<데이터 백업\>  
RDS는 자동백업 기능이 있어서 사용자가 지정한 일 수만큼의 스냅숏이 자동 유지됨.  
보존 일수는 0\~35일 사이로 지정가능.   
첫번째 스냅숏은 전체 데이터를 백업하지만 두 번째 이후의 스냅숏은 변경된 데이터만 백업.   
스냅숏 파일은 S3버킷에 저장되므로 내구성이 좋음.   
백업된 데이터양에 대해 요금이 발생.  
일반적으로 RDS의 스토리지 요금에 비해 10분의 1 정도의 요금 발생.   
특정 시점 복구라는 기능을 이용해 특정 시간을 지정하고 복원가능. 

---

### **섹션 3 고기능 Aurora의 편리한 기능**

### **3.1 Amazon Aurora: AWS 최적화 DB**

* **특징:** 클라우드 전용 설계. 높은 내결함성과 병렬 처리로 사본을 만드릭 위해 처리가 늦어지지 않음. MySQL과 PostgreSQL과 호환 가능.
* **DB 클러스터 구조:** 처리를 수행하는 DB 인스턴스와 데이터를 관리하는 클러스터 볼륨으로 구성됨. 클러스터 내의 인스턴스에서 스토리지가 공유됨. 인스턴스와 별개로 3개 AZ에 6개 사본을 저장하는 공유 스토리지.
* 6개의 사본은 쿼럼 모델이라는 복제 관리 구조를 가지고 관리됨. 쓰기 처리는 6개 중 4개, 읽기 처리는 6개 중 3개가 성공하면 클라언트에게 성공이라고 반환. 
* **장점:**  
  * **자동 확장 스토리지:** 최대 128TB까지 자동 증가.  
  * **고유 기능:** 글로벌 DB(리전 간 복제), Serverless 버전 지원.  
* 스토리지 : 일반 RDS엔진은 디스크 성능 요건에 맞게 스토리지 유형과 확보할 용량을 사용자가 결정하지만, Aurora에서는 스토리지 유형과 용량을 지정할 필요 없이 AWS가 수행.클러스터 볼륨은 최대 128TB까지 자동으로 증가.   
* 고유 기능 :  
  * 다중 리전에 걸친 글로벌 데이터베이스  
  * 두 개의 기본 인스턴스가 있는 멀티 마스터 클러스터  
  * 인스턴스 크기 지정이 필요하지 않은 Aurora Serverless  
  * S3와 연계한 파일 내보내기, 가져오기 기능

### **3.2 RDS와 Aurora의 관계: "가족이자 업그레이드 버전"**

RDS는 '관계형 데이터베이스 서비스'라는 전체 브랜드이고, Aurora는 그 브랜드에서 AWS가 만든 엔진.

* **상속 관계:** Aurora는 RDS 서비스의 한 엔진. 따라서 RDS가 가진 관리 기능(백업, 패치, 모니터링 등)을 그대로 상속받는다.  
* **차이점:** 하지만 속을 들여다보면 일반 RDS 엔진(MySQL, PostgreSQL 등)과는 설계 방식(아키텍처)이 완전히 다르다. 일반 RDS는 기존의 DB 소프트웨어를 클라우드에 옮겨놓은 느낌이라면, Aurora는 처음부터 “클라우드 환경에서 최고의 성능을 내도록 AWS가 코드를 싹 뜯어고친 DB"다.  
* **결론:** Aurora는 RDS라는 서비스 안에 포함되어 있는 AWS 전용 고성능 데이터베이스 엔진.


 **Aurora의 접속 방식: 엔드포인트를 사용**

Aurora도 RDS의 일종이므로 엔드포인트(DNS 형식의 주소)를 사용. 하지만 Aurora는 구조가 독특해서 엔드포인트가 **여러 개**라는 점이 RDS와의 큰 차이점.

* **클러스터 엔드포인트 (Cluster Endpoint):**  
  * **쓰기(Write)** 작업 전용 주소.  
  * 항상 '프라이머리 인스턴스(메인 DB)'를 가리킨다. 데이터를 넣거나 수정할 때 이 주소로 접속한다.  
* **읽기 엔드포인트 (Reader Endpoint):**  
  * **조회(Read/Select)** 작업 전용 주소이다.  
  * 여러 개의 '읽기 전용 복제본(Read Replicas)'에 트래픽을 자동으로 분산(로드 밸런싱)해준다. 사용자는 주소 하나만 쓰면 AWS가 알아서 한가한 복제본으로 연결해 준다.  
* **인스턴스 엔드포인트 (Instance Endpoint):**  
  * 각각의 개별 DB 인스턴스에 직접 접속할 때 쓰는 주소. (특정 서버의 상태를 점검할 때 가끔 쓴다.)

읽기 전용 복제본들을 하나하나 관리할 필요 없이 **엔드포인트 주소 하나만으로 수많은 복제본에 접속을 분산**할 수 있다는 것이 강력한 장점\!

장애 조치(Failover) 시 엔드포인트(Endpoint)는 왜 중요한가?

 DB 서버의 IP 주소는 장애 시 바뀔 수 있다. 하지만 사용자는 고정된 '엔드포인트(DNS 주소)'만 바라보고 있으면 AWS가 알아서 뒤에서 살아있는 DB로 연결을 돌려준다. 개발자가 코드를 수정할 필요가 없다는 것이 큰 장점.


다중 AZ 배포(Multi-AZ)와 읽기 전용 복제본(Read Replica)의 결정적 차이는?

* **다중 AZ (가용성)은** "보험". 평소에는 쓸 수 없고, 메인 DB가 죽었을 때만 가동됨. 데이터가 실시간(동기식)으로 복제되어 데이터 유실이 없음.  
* **읽기 전용 복제본 (성능):** "보조 일꾼". 평소에 조회 업무(SELECT)를 나누어 처리. 약간의 시간 차(비동기식)가 발생할 수 있음

Aurora의 공유 스토리지는 왜 대단한 건가?

**기존 RDS는** 인스턴스가 스토리지(EBS)를 꽉 잡고 있어서, 복제본을 만들 때마다 데이터를 통째로 복사해야 함. 시간이 오래 걸린다.

**Aurora는** 스토리지가 인스턴스와 분리되어 독립적으로 존재. 덕분에 인스턴스를 늘려도 데이터를 복사할 필요 없이 같은 스토리지를 바라보기만 하면 된다. (복제 속도가 압도적으로 빠름)

3개의 가용 영역(AZ)에 6개의 복사본을 자동으로 저장한다는 점에서 Aurora는. 도시 하나가 마비되어도 데이터는 안전하다.

서버리스(Serverless) DB는 언제 쓰면 좋을까?

트래픽이 들쭉날쭉한 서비스(예: 대학교 수강신청 기간, 이벤트 페이지)에 유리하다.

사용자가 없을 때는 비용이 거의 안 들고, 갑자기 사용자가 몰리면 자동으로 CPU/메모리를 늘려준다. 관리할 인스턴스 크기를 고민할 필요가 없다는 것이 큰 장점이다.


*넷플릭스처럼 전 세계 사람들이 보는 서비스에서 한국 DB에 문제가 생겼을 때, 미국이나 유럽 사용자가 끊김 없이 서비스를 이용하게 하려면 어떤 기능을 써야 할까요?"* (정답: **Aurora 글로벌 데이터베이스**를 통해 리전 간 복제를 구현한다.)

---

### **섹션 4\. 키와 값의 조합으로 데이터 관리**


### **4.1  키-값 데이터베이스란?**

DynamoDB는 key-value형 데이터를 저장하는 데이터베이스.   
복잡한 검색은 안되지만 고속으로 데이터 추출 가능.   
일련의 데이터를 ‘레코드’라고 하며 레코드의 각 항목을 ‘속성’이라고 한다.   
각 레코드가 고유하게 특정할 수 있는 속성(기본키)을 가지고 있으면 다른 속성은 어떤 것을 가지고 있어도 상관 없다.

### **4.2 Amazon DynamoDB (Key-Value DB)**

* **핵심:** 초당 수천만 건의 요청을 처리하는 고속 서버리스 DB.  
* **특징:**  
  * 기본키(Primary Key) 기반 검색.  
  * **용량 모드:** 프로비저닝(예약제, RCU/WCU) vs 온디맨드(사용한 만큼).  
* **가용성:** 3개 AZ 실시간 복제, PITR(특정 시점 복구) 지원.  
* **이용료** : DynamoDB는 데이터 보관료(스토리지)와 데이터 처리량(읽기/쓰기) 두 가지를 기준으로 과금됩니다. 사용자는 서버 관리 없이 '테이블' 단위로만 비용을 관리하면 된다.

서비스의 트래픽 특성에 따라 두 가지 모드 중 하나를 선택할 수 있다.

| 구분 | 프로비저닝 모드 (Provisioned) | 온디맨드 모드 (On-demand) |
| :---- | :---- | :---- |
| **특징** | 초당 처리량(RCU/WCU)을 미리 예약 | 예약 없이 실제 사용량만큼 지불 |
| **비용** | 예약한 만큼 고정 지불 (상대적 저렴) | 요청당 비용 지불 (트래픽 예측 불가시 유리) |
| **확장** | 오토스케일링으로 예약량 자동 조절 가능 | 자동으로 무제한 확장 |
| **주의** | 예약량 초과 시 오류 발생 가능 | 예상보다 많은 요금이 발생할 수 있음 |

* **유지 보수 :**

  1\. 사용자의 역할: 데이터만 관리

  AWS의 역할: 시스템 운영, 하드웨어 관리, 데이터 암호화, 스토리지 확장 등 복잡한 인프라 관리를 모두 전담.

  사용자의 역할: 테이블의 구조(설계)를 검토하거나 백업 계획을 세우는 등 ‘데이터 관리’에만 집중하면 된다..

  ### 2\. 강력한 데이터 보호: "3중 복제"

  데이터를 저장하면 AWS가 알아서 3개의 가용 영역(AZ, 서로 떨어진 데이터 센터)에 실시간으로 복제본을 만듬.

  덕분에 한 곳에 큰 장애(지진, 화재 등)가 발생해도 서비스가 끊기지 않고 안전하게 유지된다.

  ### 3\. 편리한 백업과 복구: "타임머신 기능"

  PITR (특정 시점 복구): 이 기능을 켜두면 지난 35일 이내 어느 시점으로든 데이터를 되돌릴 수 있다.

  관리 도구: 복잡한 명령어(API)를 몰라도 AWS 관리 콘솔 화면에서 직접 데이터를 확인하거나 수정할 수 있어 편리.

*  **이용 예 :** 

하루에 10조건 이상, 초당 2000만건 이상의 요청을 고속으로 처리 가능.  
이 강점을 살릴수 있는 모바일, 웹, 게임, 광고, IoT와 같이 데이터 교환이 매우 많고 사용자에게 빠른 응답이 필요한 응용 프로그램에 이용됨.  
IoT기술을 이용한 차량 위치 추적 시스템, 게임의 순위 시스템, 웹 광고의 클릭수 관리 같은 것은 실시간 업데이트와 확인이 필요한 시스템으로 사용하기 좋다. 

**DynamoDB에서 기본키(Primary Key)로만 검색하면 불편하지 않나?**

맞습니다. RDB처럼 `WHERE` 절을 마음대로 쓰기 어렵다.

하지만 LSI/GSI(인덱스)라는 기능을 쓰면 다른 속성으로도 검색이 가능해진다..

 "DynamoDB는 유연함보다는 **어떤 양의 데이터에서도 0.01초 만에 응답하는 속도**를 위해 검색 조건을 제한하는 설계를 선택한 것.

---

### **섹션 5\. 데이터 분석을 위한 대량의 데이터 수집**


### **5.1 Amazon Redshift (데이터 웨어하우스)**

짐을 창고에 쌓아두듯이 데이터를 쌓아두는 역할.  
다른 리전에 있는 대량의 S3나 RDS 데이터를 Redshift로 가져와 SQL이나 BI도구를 이용해 분석할 수 있게 해줌. 

* **목적:** 대규모 데이터 분석용 (OLAP).  
* **구조:** 열 지향(Columnar) 스토리지 → 분석 쿼리에 최적화.데이터 조작을 위해서 SQL 사용.   
* **컴퓨팅:** SQL 연결을 받아들이는 리더 노드와 스토리지 및 SQL 문을 실행하는 컴퓨터 노드라는 두 가지 노드로 구성됨. 컴퓨터 노드는 여러 개 존재하므로 처리를 분산해 고속으로 실행.   
  최신 Redshift는 RA3라는 노드 유형 사용.저장은 싸게, 계산은 빠르게한다는 장점을 가진다.   
* **실제 데이터:** 아주 저렴한 저장소인 **S3**에 보관 (사용자에게는 안 보임).  
* **자주 쓰는 데이터:** 계산기인 **컴퓨팅 노드**로 가져와서 빠르게 처리.  
* **Tip:** INSERT보다는 COPY 명령어를 사용해 S3 등에서 대량 업로드 권장.Redshift는 데이터를 하나하나 넣는 것(INSERT)을 매우 싫어한다.통째로 부어버리는 것을 선호한다.

**Redshift의 '열 지향(Columnar)' 스토리지가 왜 분석에 유리할까?**

**일반 DB(행 지향):** 이름, 나이, 주소 정보를 한 줄씩 저장한다. "평균 나이"를 구하려면 필요 없는 이름과 주소까지 다 읽어야 한다.

**Redshift(열 지향):** 나이 데이터만 따로 모아서 저장한다. "평균 나이"를 구할 때 **나이 열만 딱 읽으면 끝**난다. 데이터가 많을수록(수조 건) 속도 차이가 어마어마하다.

**왜 Redshift는 INSERT가 아닌 COPY를 써야 하나?**

Redshift는 거대한 데이터를 처리하는 분산 시스템. 한 줄씩 넣는 `INSERT`는 이 거대한 엔진을 매번 켰다 켰다 하는 격이라 매우 비효율적.

대신 S3에 쌓인 수천 개의 파일을 여러 대의 컴퓨팅 노드가 '병렬'로 동시에 쫙 빨아들이는 `COPY` 방식이 훨씬 빠르다.

---


### **세션 6 데이터베이스 마이그레이션에 도움이 되는 2가지 서비스**

### **6.1 마이그레이션 서비스**

* **AWS DMS(database migration service) : 단순** 데이터 이전 뿐만 아니라 데이터 형식을 맞춰 옮겨주거나 마이그레이션 도중에 발생한 원본 데이터의 변경 내용도 실시간 추적, 데이터가 문제 없는지 검증.  
* **AWS SCT(Schema Conversion Tool) :**  데이터베이스의 설계도인 '스키마'를 다른 엔진용으로 바꿔주는 도구. (예: 오라클 설계도를 MySQL 설계도로 번역)  
* **형태:** 클라우드 서비스가 아니라, 사용자의 **PC에 직접 설치해서 사용하는 프로그램**.  
* **왜 필요한가?** 마이그레이션의 첫 단추로서, 데이터베이스마다 사용하는 언어나 규칙이 조금씩 다르다. 새로운 DB에 데이터를 넣기 전에, 스키마부터 새 구조에 맞게 수정해야 하기 때문.

* ### **SCT의 작업 흐름 :** SCT는 단순히 변환만 하는 게 아니라, 마이그래이션이 안전한지 미리 알려주는 **'진단 도구'** 역할도 한다.

  * **평가 보고서 확인:** "이 부분은 자동으로 바뀌지만, 저 부분은 수동으로 고쳐야 해요"라고 미리 알려준다. (마이그레이션 실패 확률을 줄여줌)  
  * **스키마 생성 및 수정:** 새 DB에 딱 맞는 설계도를 만든다. 자동 변환이 안 되는 복잡한 기능은 사용자가 직접 손을 본다.  
  * **데이터 이동(DMS 연계):** 설계도가 완성되면, 실제 데이터는 DMS(Database Migration Service)라는 서비스가 옮기도록 바톤을 넘긴다.

**DMS와 SCT는 언제 같이 쓰나?**.

같은 종류의 DB끼리 옮길 때는 DMS만 써도 되지만, DB 종류가 바뀔 때는 반드시 SCT로 설계를 먼저 바꿔야 한다.

*초에 전 세계에서 수십만 건의 클릭이 발생하는 광고 클릭 로그를 실시간으로 저장하려면 DynamoDB가 맞을까요, Redshift가 맞을까?"*

**정답:** 실시간 '저장'은 **DynamoDB**, 저장된 수십억 건의 데이터를 나중에 '분석'하여 보고서를 만드는 건 **Redshift**가 적합합니다.

실제로 현업에서는 이 두 가지를 연결해서 쓴다.

1. **DynamoDB**에 실시간 로그를 쏜다.  
2. **S3**라는 저장소에 데이터를 백업해 둔다.  
3. **Redshift**의 `COPY` 명령어를 사용해 S3의 데이터를 대량으로 불러와 분석한다.

---

### **쳅터 7\. 다양한 데이터베이스를 지원하는 7가지 서비스**

| 서비스명 | 유형 | 주요 특징 |
| :---- | :---- | :---- |
| **ElastiCache** | 인 메모리 | 서버의 주기억장치인 메모리에 데이터를 저장하여 고속으로 데이터를 읽고 쓸 수 있게 함. 시스템이 정지되면 메모리에 저장된 데이터도 모두 삭제됨. Redis/Memcached 호환. 초고속 성능, 캐싱용. \- 어떨때 쓰면 좋을까? **성능 가속:** 데이터베이스에 물어보기 전에 캐시에 먼저 물어봐서 결과를 빨리 보여줄 때. **임시 데이터 저장:** 로그인 세션이나 쇼핑몰 장바구니처럼 **속도가 생명이지만 잠시 사라져도 치명적이지 않은 데이터**를 다룰 때. **실시간 계산:** 게임의 실시간 점수판(리더보드)처럼 데이터가 계속 변하고 즉시 반영되어야 할 때.  |
| **MemoryDB** | 인 메모리 \+ 지속성 | Redis 호환 \+ 데이터 영구 저장 가능. elasticache는 고속인 대신 데이터가 사라질 수 있다는 단점이 있다.  이 단점을 해결하기 위해 데이터의 지속성을 확보하면서 빠른 읽기 쓰기가 가능하다.  |
| **DocumentDB** | 문서 지향 | MongoDB 호환. JSON 형식 데이터 검색 특화. JSON도 키와 값의 조합으로 표현되는 데이터지만 프라이머리 키로만 레코드를검색할 수 있는 키-값 데이터베이스와는 달리 JSON 내의 모든 요소를 이용해 레코드를 검색할 수 있다.  |
| **Neptune** | 그래프 | 노드와 엣지(관계) 중심. 소셜 네트워크 분석 등. 그래프 데이터베이스를 제공하는 서비스 그래프 구조는 데이터 간의 관계성을 나타내는 데 특화된 구조로, 각 데이터를 나타내는 ‘노드’, 관계를 나타내는 ‘엣지’, 노드 및 관계의 내용을 나타내는 ‘속성’ 3가지 요소로 구성된다.  |
| **QLDB(quantum ledger database)** | 원장(Ledger) | 수정 불가능한 이력 관리. 높은 신뢰성. 저널이라는 로그 데이터에 기록되는 데이터의 변경 이력을 차례로 기록하는 방식.  저널은 추가만 가능하며 변경이나 삭제를 할수 없는 구조로 돼 있어 신뢰성이 높다.  |
| **Timestream** | 시계열 | IoT 센서 데이터 등 시간 순서 데이터 처리. 센서 등에서 보내오는 시간마다 변화하는 값을 순차적으로 적합한 데이터베이스로 RDB의 최대 1000배의 속도로 하루에 수조 개의 이벤트를 처리할 수 있다.  |
| **Managed Blockchain** | 블록체인 | 분산형 원장 기술. 네트워크 참여자 간 협력 관리.  블록체인이란 분산형 원장 기술의 한 종류로, 데이터의 변경 내역을 기록하는 원장을 네트워크에 참여한 여러 서버에서 협력해 관리하는 시스템. 원장을 기록하는 데이터베이스라는 점은 QLDB와 비슷하지만 한 곳에서 데이터를 집계해 관리하는 QLDB와 달리 데이터를 여러 곳에 분산시켜 보관하는 기술이므로 엄밀히 말하면 데이터베이스는 아니다.  |

1.  **Neptune(그래프 DB)은 대체 어디에 쓰나?**

표(Table) 형태의 DB로는 관계를 표현하기 힘든 곳에 쓰입니다.

* **포인트:** 친구의 친구(지인 추천), 사기 거래 탐지(자금 흐름 추적), 물류 경로 최적화 등에 쓰인다.  
* **핵심 단어:** "관계의 깊이가 깊어질수록 RDB는 속도가 느려지지만, Neptune은 관계(엣지)를 따라가기 때문에 훨씬 빠르다

**2\. DocumentDB(JSON)는 왜 따로 필요한가? DynamoDB로 안 되나?"**

### DynamoDB는 '키'로만 데이터를 찾아야 하지만, DocumentDB는 JSON 문서 내부의 어떤 필드(값)로도 검색이 가능하다.

* 핵심: 유연한 데이터 구조가 필요하면서도 복잡한 검색 기능이 중요할 때(예: 쇼핑몰의 다양한 상품 속성 검색) 사용한다.


**3\. 검색도 잘 되고 유연하다면 왜 굳이 불편한 DynamoDB를 써야 하지?**

### **1\. 확장성(Scalability)의 차이 (무한대 vs 한계)**

* **DynamoDB:** 데이터가 1TB든 100TB든, 사용자가 100명이든 1억 명이든 **일정한 성능**을 보장한다. 서버가 없는(Serverless) 구조라 AWS가 알아서 무한대로 늘려준다.  
* **DocumentDB:** 서버(인스턴스) 기반이다. 데이터가 너무 많아지면 더 큰 사양의 서버로 업그레이드해야 하고, 확장하는 데 한계가 존재한다.  
* **결론:** 전 세계 규모의 초거대 트래픽을 감당해야 한다면 **DynamoDB**.

  ### **2\. 비용과 운영 관리 (서버리스 vs 인스턴스)**

* **DynamoDB:** 서버를 켜둘 필요가 없다. 요청이 올 때만 돈을 내거나(On-demand), 아주 저렴하게 시작할 수 있다. 관리가 아예 필요 없는 **'제로 관리'** 서비스이다.  
* **DocumentDB:** 사용하지 않아도 일단 서버(Cluster)를 띄워놓아야 하므로 **기본 유지비**가 꽤 비싸다. 서버의 상태를 계속 모니터링해야 하는 관리 부담도 있다.  
* **결론:** 비용 효율성과 운영의 편리함은 **DynamoDB**가 훨씬 앞선다

  ### **3\. 성능의 예측 가능성 (Speed)**

* **DynamoDB:** 키를 사용해 직접 데이터를 찾기 때문에 데이터 양이 아무리 많아도 응답 시간이 늘 10ms(0.01초) 미만으로 일정.  
* **DocumentDB:** 문서 내부의 다양한 필드로 검색할 수 있다는 것은, 뒤집어 말하면 **데이터가 많아질수록 검색(Query)이 복잡해지고 느려질 수 있다**는 뜻이다. 인덱스를 잘못 설정하면 성능이 뚝 떨어진다.

**4\. QLDB와 Managed Blockchain의 차이는?**

둘 다 '이력 관리'라는 단어가 들어가서 헷갈린다. '누가 관리하느냐'가 핵심.

* **QLDB (중앙 집중):** AWS가 중앙에서 관리하는 신뢰할 수 있는 원장. (예: 중고차 사고 이력, 은행 거래 기록)  
* **Managed Blockchain (분산):** 여러 회사나 기관이 서로를 완전히 믿지 못할 때, **데이터를 나누어 관리**하여 투명성을 확보한다. (예: 다국적 기업 간의 수출입 이력)

**5\. Timestream(시계열 DB)은 RDB랑 뭐가 다른가?**

*  일반 RDB는 시간이 지날수록 데이터가 쌓여 느려지지만, Timestream은 시간 순서대로 데이터를 압축하고 자동으로 오래된 데이터를 처리(정리)하는 기능이 내장되어 있다.

