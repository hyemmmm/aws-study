# 쿼럼(Quorum) 모델 정리  
_분산 시스템 개념부터 이해하는 쿼럼 모델_

---

## 1. 분산 시스템이란?

### 1.1 분산 시스템의 정의
**분산 시스템(Distributed System)** 이란  
> 여러 대의 컴퓨터(노드)가 네트워크로 연결되어  
> 하나의 시스템처럼 동작하는 구조

예시:
- 여러 대의 서버로 구성된 웹 서비스
- 분산 데이터베이스
- 클라우드 환경

---

### 1.2 왜 분산 시스템을 쓰는가?

| 이유 | 설명 |
|----|----|
| 확장성 | 서버를 추가해 처리량 증가 |
| 장애 허용 | 일부 서버가 죽어도 서비스 유지 |
| 성능 | 병렬 처리로 응답 속도 개선 |

---

## 2. 분산 시스템의 핵심 문제: 데이터 복제

### 2.1 단일 서버의 한계
- 서버 1대 → 장애 시 서비스 중단
- 성능 한계 존재

### 2.2 해결책: 데이터 복제
- 동일한 데이터를 여러 서버에 저장
- 예: A, B, C 서버 모두 같은 데이터 보유

---

## 3. 복제가 만들어내는 문제: 일관성

### 3.1 문제 상황
- 서버 A, B는 최신 데이터
- 서버 C는 네트워크 문제로 오래된 데이터

이 상태에서:
- 어디서 읽어야 **정답**인가?
- 어떤 데이터가 **진짜 최신**인가?

👉 **데이터 불일치(Inconsistency)** 문제 발생

---

## 4. 분산 시스템의 근본적인 제약 (CAP 이론)

### 4.1 CAP 이론
분산 시스템은 다음 중 **2가지만 동시에 만족 가능**

| 요소 | 설명 |
|----|----|
| Consistency | 모든 노드가 동일한 데이터 |
| Availability | 항상 응답 가능 |
| Partition Tolerance | 네트워크 분할 허용 |

👉 네트워크 분할은 피할 수 없으므로  
실제 시스템은 **C vs A의 선택 문제**로 귀결됨

---

## 5. 일관성을 관리하는 방법 중 하나: 쿼럼 모델

### 5.1 쿼럼(Quorum)의 의미
> **의사결정을 내리기에 충분한 최소한의 노드 수**

분산 시스템에서는:
- “이 정도 서버가 동의하면 안전하다”라는 기준

---

## 6. 쿼럼 모델의 기본 구성 요소

### 6.1 기본 용어

| 기호 | 의미 |
|----|----|
| N | 전체 복제본 수 |
| W | 쓰기 쿼럼 (write quorum) |
| R | 읽기 쿼럼 (read quorum) |

---

### 6.2 동작 방식

#### 쓰기 (Write)
- 데이터를 **W개 노드**에 저장하면 쓰기 성공

#### 읽기 (Read)
- 데이터를 **R개 노드**에서 읽어서 판단

---

## 7. 쿼럼 모델의 핵심 규칙

### 7.1 핵심 공식
R + W > N


### 7.2 이 공식의 의미
- 읽기 노드와 쓰기 노드가 **반드시 겹치도록 보장**
- 최소 1개 이상의 노드는 **최신 데이터를 포함**

👉 오래된 데이터만 읽는 상황을 방지

---

## 8. 예시로 이해하는 쿼럼 모델

### 8.1 안전한 설정
- N = 3
- W = 2
- R = 2

R + W = 4 > 3


- 쓰기: A, B
- 읽기: B, C  
→ **B가 겹침 → 최신 데이터 확보**

---

### 8.2 위험한 설정
- N = 3
- W = 1
- R = 1

R + W = 2 ≤ 3


- 쓰기: A
- 읽기: C  
→ 최신 데이터 보장 불가

---

## 9. 성능과 일관성의 트레이드오프

### 9.1 쓰기 중심 시스템
- W ↓, R ↑
- 쓰기 빠름, 읽기 느림

### 9.2 읽기 중심 시스템
- R ↓, W ↑
- 읽기 빠름, 쓰기 느림

👉 쿼럼 모델은 **정답이 아니라 선택의 문제**

---

## 10. 쿼럼 모델의 장단점

### 장점
- 강한 일관성 설계 가능
- 일부 노드 장애 허용
- 리더 없는 구조 가능

### 단점
- 지연(latency) 증가 가능
- 설정 복잡
- 네트워크 분할 상황에서는 가용성 저하

---

## 11. 실제 시스템에서의 활용

- Amazon Dynamo / DynamoDB
- Apache Cassandra
- MongoDB Replica Set (변형)
- Riak
